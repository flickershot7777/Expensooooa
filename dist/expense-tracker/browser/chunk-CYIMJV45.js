import{a as k,b as N}from"./chunk-ORZRCDMV.js";import{a as D,b as U}from"./chunk-KOAHGTDB.js";import{$ as u,B as d,C as v,G as E,J as m,L as e,M as t,O as S,P as y,Q as w,S as n,T as p,U as x,_ as b,c as F,fa as V,ha as _,ia as C,ja as O,ka as I,la as M,ma as f,t as g,u as h,ua as P,va as A,z as s}from"./chunk-ZQFCUUPU.js";function $(a,o){if(a&1){let i=S();e(0,"tr")(1,"td"),n(2),t(),e(3,"td"),n(4),b(5,"number"),t(),e(6,"td"),n(7),t(),e(8,"td"),n(9),t(),e(10,"td"),n(11),b(12,"date"),t(),e(13,"td")(14,"button",21),y("click",function(){let l=g(i).$implicit,c=w();return h(c.deleteExpense(l.id))}),n(15," Delete "),t()()()}if(a&2){let i=o.$implicit;s(2),p(i.description),s(2),p(u(5,5,i.amount,"1.2-2")),s(3),p(i.category),s(2),p(i.productType),s(2),p(u(12,8,i.date,"shortDate"))}}function j(a,o){a&1&&(e(0,"tr")(1,"td",22)(2,"div",23)(3,"h5"),n(4,"No expenses recorded yet."),t(),e(5,"p"),n(6,"Add your first expense to get started!"),t()()()())}var T,B=F(()=>{f();f();A();V();N();U();f();T=class a{constructor(o,i){this.expenseService=o;this.authService=i}expenses=[];currentUser=null;subscriptions=[];ngOnInit(){let o=this.authService.currentUser$.subscribe(r=>{this.currentUser=r});this.subscriptions.push(o);let i=this.expenseService.expenses$.subscribe(r=>{this.expenses=r.sort((l,c)=>new Date(c.date).getTime()-new Date(l.date).getTime())});this.subscriptions.push(i)}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}deleteExpense(o){if(confirm("Are you sure you want to delete this expense?")){let i=this.expenseService.deleteExpense(o).subscribe({next:r=>{r||alert("Failed to delete expense")},error:r=>{console.error("Error deleting expense:",r),alert("Error deleting expense")}});this.subscriptions.push(i)}}getTotalExpenses(){return this.expenses.reduce((o,i)=>o+i.amount,0)}formatCurrency(o){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o)}static \u0275fac=function(i){return new(i||a)(d(k),d(D))};static \u0275cmp=v({type:a,selectors:[["app-view-expense"]],decls:44,vars:5,consts:[[2,"padding-top","60px"],[1,"text-center","text-white","my-5"],[1,"text-center","text-white","mb-3"],[1,"text-center","text-white","mb-5"],[1,"currentExpenses",2,"padding-top","5px","padding-bottom","20px"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"card","bg-dark","border-light"],[1,"card-header","text-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"badge","bg-primary"],[1,"card-body","p-2"],[1,"table-responsive"],[1,"table","table-striped","table-dark","table-bordered","mb-0"],[1,"table-primary"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","1",1,"fw-bold"],[1,"fw-bold","text-dark",2,"background","#00FFFF"],["title","Delete expense",1,"btn","btn-danger","btn-sm",3,"click"],["colspan","6",1,"text-center","text-muted","py-4"],[1,"py-3","text-white"]],template:function(i,r){i&1&&(e(0,"div",0)(1,"h2",1),n(2,"View Expenses"),t(),e(3,"p",2),n(4,"Here you can view all your expenses."),t(),e(5,"p",3)(6,"strong"),n(7),t()()(),e(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"h5",10),n(15,"Expense List"),t(),e(16,"span",11),n(17),t()(),e(18,"div",12)(19,"div",13)(20,"table",14)(21,"thead",15)(22,"tr")(23,"th",16),n(24,"Expense Description"),t(),e(25,"th",16),n(26,"Amount (\u20B9)"),t(),e(27,"th",16),n(28,"Category"),t(),e(29,"th",16),n(30,"Product Type"),t(),e(31,"th",16),n(32,"Date"),t(),e(33,"th",16),n(34,"Actions"),t()()(),e(35,"tbody"),E(36,$,16,11,"tr",17)(37,j,7,0,"tr",18),t(),e(38,"tfoot")(39,"tr")(40,"td",19),n(41,"Total Amount:"),t(),e(42,"td",20),n(43),t()()()()()()()()()()()),i&2&&(s(7),x("Total Amount: ",r.formatCurrency(r.getTotalExpenses()),""),s(10),x("",r.expenses.length," expense(s)"),s(19),m("ngForOf",r.expenses),s(),m("ngIf",r.expenses.length===0),s(6),p(r.formatCurrency(r.getTotalExpenses())))},dependencies:[O,M,_,C,I,P],styles:[".currentExpenses[_ngcontent-%COMP%]{min-height:400px}.card[_ngcontent-%COMP%]{box-shadow:0 4px 6px #0000001a;border-radius:8px}.card-header[_ngcontent-%COMP%]{background-color:#495057!important;border-bottom:1px solid #6c757d}.form-control[_ngcontent-%COMP%]{background-color:#495057;border:1px solid #6c757d;color:#fff}.form-control[_ngcontent-%COMP%]:focus{background-color:#495057;border-color:#007bff;color:#fff;box-shadow:0 0 0 .2rem #007bff40}.form-control[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.table-dark[_ngcontent-%COMP%]{--bs-table-bg: #212529}.table-primary[_ngcontent-%COMP%]{--bs-table-bg: #0d6efd;--bs-table-color: white}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3;transform:translateY(-1px)}.btn-danger[_ngcontent-%COMP%]{transition:all .3s ease}.btn-danger[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{font-size:14px}.btn-sm[_ngcontent-%COMP%]{font-size:12px;padding:.25rem .5rem}}"]})}});B();export{T as ViewExpenseComponent};
