import{c as b,e as c,fa as m,g as n,k as h,o,qa as u,r as a,va as S}from"./chunk-ZQFCUUPU.js";var l,g=b(()=>{"use strict";h();m();S();l=class r{constructor(e){this.router=e;this.checkLocalStorage()}currentUserSubject=new n(null);currentUser$=this.currentUserSubject.asObservable();isAuthenticatedSubject=new n(!1);isAuthenticated$=this.isAuthenticatedSubject.asObservable();checkLocalStorage(){try{let e=localStorage.getItem("currentUser");e&&(this.currentUserSubject.next(JSON.parse(e)),this.isAuthenticatedSubject.next(!0))}catch(e){console.error("Error parsing user data from localStorage:",e),localStorage.removeItem("currentUser")}}login(e,i){return new c(t=>{setTimeout(()=>{if(e&&i){let s={id:"1",email:e,name:e.split("@")[0]};localStorage.setItem("currentUser",JSON.stringify(s)),this.currentUserSubject.next(s),this.isAuthenticatedSubject.next(!0),t.next(!0),t.complete()}else t.next(!1),t.complete()},1e3)})}logout(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null),this.isAuthenticatedSubject.next(!1),this.router.navigate(["/login"])}getCurrentUser(){return this.currentUserSubject.value}isAuthenticated(){return this.isAuthenticatedSubject.value}static \u0275fac=function(i){return new(i||r)(a(u))};static \u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})}});export{l as a,g as b};
